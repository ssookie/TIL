# Chapter 03 "스프링과 Oracle DB 연동"

## 1. 오라클 설치
* mac에서는 oracleDB를 바로 이용할 수 없어 docker를 이용하여 설치함.
* 참고: [macOS 오라클 DB 설치 및 실행 방법](https://whitepaek.tistory.com/40)

### 1.1. docker 설치
* https://www.docker.com/docker-mac
```shell script
$ docker --version
$ docker info
```
### 1.2. Oracle 11g  이미지 다운로드 및 컨테이너 생성
#### 1.2.1. installation
```shell script
$ docker search oracle-xe-11g # 다운로드 할 이미지 검색
$ docker pull jaspeen/oracle-xe-11g # 이미지 다운로드
$ docker images # 다운로드 한 이미지 목록 조회
```

#### 1.2.2. Run
```shell script
## 컨테이너 생성 및 실행
$ docker run --name oracle11g-test -d -p 8080:8080 -p 1521:1521 jaspeen/oracle-xe-11g
## 실행 중인 컨테이너 목록을 확인
$ docker ps
```
* --name: 자신이 설정하고 싶은 이름으로 입력 (생략해도 됨)
* -d: 백그라운드에서 컨테이너 실행
* -p: 호스트의 PORT를 외부에 공개함 (오라클 docker 컨테이너의 port를 연결함)
* -v: 컨테이너(프로그램) 실행시킨 후 생성된 데이터는 컨테이너가 종료되면 저장이 되지 않고 날아가버리는것 방지 (무상태 지향),<br> 
도커의 외부 즉 맥북에 데이터를 저장함

#### 1.2.3. Oracle Database SQLPlus 실행하기
* run 명령어를 통해서 컨테이너 생성과 동시에 실행하였기 때문에<br>
도커를 종료시키거나 컨테이너를 정지시키지 않았다면 오라클 데이터베이스 컨테이너가 실행 중인 상태임
```shell script
# 오라클 데이터베이스 SQLPlus를 실행 (system/oracle)
$ docker exec -it oracle11g-test sqlplus
```

#### 1.2.4. 8080 Port 변경
* 웹 개발시 많이 사용하는 Tomcat 의 기본 포트가 8080 이므로 중복 발생 가능성 → 오라클 포트 변경
```
/* 현재 사용하는 포트 번호 확인 (8080) */
SQL> select dbms_xdb.gethttpport() from dual;
/* 8080 인 경우, 포트 변경 후 재확인 */
SQL> exec dbms_xdb.sethttpport(9090);
```

#### 1.2.5. 계정 생성
```
SQL> create user gugucoding identified by gugucoding2021;
SQL> select username from all_users;
```

## 2. DBeaver 설치
* https://dbeaver.io/download/
* 반드시 SID로 접속
* 계정 생성
