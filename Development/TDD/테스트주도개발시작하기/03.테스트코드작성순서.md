# [Chapter 03 "테스트 코드 작성 순서"](https://github.com/bakery-blueprint/sandwich-tdd/blob/master/docs/2%EC%A3%BC%EC%B0%A8/Ch03_%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EC%BD%94%EB%93%9C%20%EC%9E%91%EC%84%B1%20%EC%88%9C%EC%84%9C.md)

## 1. 테스트 코드 작성 순서

### 테스트 코드 순서 규칙은

1. 쉬운 경우에서 어려운 경우로 진행
1. 예외적인 경우에서 정상적인 경우로 진행

### 쉬운 테스트부터 진행해야 하는 이유

* (당연하게도) 초반부터 어려운 테스트로 시작하면, <br>
초반에 모든 경우의 수를 충족시켜야 하는 경우가 발생하므로 쉬운 경우부터 진행해야 한다.

### 예외 상황을 먼저 테스트해야 하는 이유

* 예외를 고려하지 않은 케이스 테스트 후 예외를 넣으려면 코드의 구조를 뒤집거나<br>
중간에 조건문을 넣어야 하는 경우가 많아지므로 버그 발생 가능성을 높인다.
* 초반에 if-else 로 예외가 구현되어야 테스트가 진행되더라도 코드 구조가 덜 바뀐다.

### 완급 조절

1. 정해진 값을 리턴
1. 값 비교를 이용해서 정해진 값을 리턴
1. 다양한 테스트를 추가하면서 구현을 일반화

### 지속적인 리팩토링

* 상수를 변수로 바꾸거나 변수이름을 변경하는 것과 같은 작은 리팩토링은 발견 즉시 진행.
* 메서드 추출과 같이 메서드의 구조에 영향을 주는 리팩토링은 큰 틀에서 구현의 흐름이 눈에 들어오기 시작한 뒤에 진행.

## 2. 테스트할 목록 정리하기

### ex) 만료일 계산 기능 구현시 

* 1만원 납부하면 한 달 뒤가 만료일
* 달의 마지막 날에 납부하면 다음달 마지막 날이 만료일
* 2만원 납부하면 2개월 뒤가 만료일
* 3만원 납부하면 3개월 뒤가 만료일
* 10만원 납부하면 1년 뒤가 만료일

### 이 때 주의할 것

* 테스트 과정에서 새로운 테스트 케이스 발견시 목록에 즉시 추가한다.
* 리팩토링이 너무 거대하면 진행하지 말고, 테스트 통과에 집중한다.
* 하나의 싸이클 완성시 거대한 리팩토링을 진행하되, 커밋이나 내용 복사를 해둘 것.

## 3. 시작이 안될 때는 단언부터 고민하자.

```java
assertEquals(기대하는 만료일, 실제 만료일);
```

* 위 단언부터 시작하여 거꾸로 메서드를 작성해보자.
